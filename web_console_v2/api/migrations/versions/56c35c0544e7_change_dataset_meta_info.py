"""change dataset meta info

Revision ID: 56c35c0544e7
Revises: e4c8d7a2cf34
Create Date: 2022-01-14 13:47:58.216698

"""
from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import mysql

# revision identifiers, used by Alembic.
revision = '56c35c0544e7'
down_revision = 'e4c8d7a2cf34'
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column('data_batches_v2', sa.Column('num_example', sa.BigInteger(), nullable=True, comment='num_example'))
    op.add_column('data_batches_v2', sa.Column('num_feature', sa.BigInteger(), nullable=True, comment='num_feature'))
    op.add_column('data_batches_v2', sa.Column('meta_info', sa.Text(length=16777215), nullable=True, comment='dataset meta info'))
    op.drop_column('data_batches_v2', 'num_imported_file')
    op.drop_column('data_batches_v2', 'num_file')
    op.drop_column('data_batches_v2', 'details')
    op.add_column('intersection_datasets_v2', sa.Column('file_size', sa.BigInteger(), nullable=True, comment='file_size in bytes'))
    op.add_column('intersection_datasets_v2', sa.Column('num_example', sa.BigInteger(), nullable=True, comment='num_example'))
    op.add_column('intersection_datasets_v2', sa.Column('num_feature', sa.BigInteger(), nullable=True, comment='num_feature'))
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_column('intersection_datasets_v2', 'num_feature')
    op.drop_column('intersection_datasets_v2', 'num_example')
    op.drop_column('intersection_datasets_v2', 'file_size')
    op.add_column('data_batches_v2', sa.Column('details', mysql.MEDIUMBLOB(), nullable=True, comment='details'))
    op.add_column('data_batches_v2', sa.Column('num_file', mysql.INTEGER(), autoincrement=False, nullable=True, comment='num_file'))
    op.add_column('data_batches_v2', sa.Column('num_imported_file', mysql.INTEGER(), autoincrement=False, nullable=True, comment='num_imported_file'))
    op.drop_column('data_batches_v2', 'meta_info')
    op.drop_column('data_batches_v2', 'num_feature')
    op.drop_column('data_batches_v2', 'num_example')
    # ### end Alembic commands ###
